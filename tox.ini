[tox]
envlist =
    py27,flake8

[testenv]
deps =
    zope.testrunner
    zope.app.testing
    zope.app.wsgi >= 4.0dev
    zope.app.zcmlfiles
    zope.app.server
    zope.testbrowser[test]
# install zope.app.pagetemplate explicitly to avoid
# https://github.com/pypa/pip/issues/854
commands =
    pip install zope.app.pagetemplate
    zope-testrunner --test-path=src

[testenv:flake8]
basepython = python2
deps = {[testenv]deps}
       flake8
commands = flake8 src setup.py --doctests
